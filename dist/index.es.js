import e,{useState as t,useEffect as r}from"react";import a from"prop-types";function n(e,a){const[n,i]=t(e);return r((()=>{if(""===a||a.length<2)return i(e);const t=e.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(a.toLowerCase())))));i(t)}),[e,a]),n}function i(e,a,n,i){const[o,s]=t([]),[l,c]=t([]);return r((()=>{const t=function(e,t){const r=[],a=Math.ceil(e.length/t);for(let e=1;e<=a;e++)r.push(e);return r}(e,n);s([...t]);const r=function(e,t,r){return e.slice((t-1)*r,t*r)}(e,a,n);c([...r])}),[e,s,a,c,n,i]),{slice:l,range:o}}function o(e,a){const[n,i]=t(e);return r((()=>{if(!a)return i(e);"ascending"===a.order?i(e.sort(((e,t)=>e[a.property]>t[a.property]?1:-1))):i(e.sort(((e,t)=>e[a.property]>t[a.property]?-1:1)))}),[n,e,a]),n}function s({pageSize:t,setPageSize:r,pageSizeOptions:a}){return e.createElement("div",{className:"selectPageSize"},e.createElement("label",null,"Show"," ",e.createElement("select",{value:t,onChange:e=>r(parseInt(e.target.value))},a.map((t=>e.createElement("option",{key:t},t))))," ","Entries"))}function l({searchString:t,setSearchString:r}){return e.createElement("div",{className:"search"},e.createElement("label",null,"Search: "," ",e.createElement("input",{type:"search",value:t,onChange:e=>r(e.target.value)})))}function c({selectPageSize:t,pageSize:r,setPageSize:a,pageSizeOptions:n,searchString:i,setSearchString:o,allowSearch:c}){return c||t?e.createElement("div",{className:"tableHeader"},t&&n.length>1&&e.createElement(s,{pageSize:r,setPageSize:a,pageSizeOptions:n}),c&&e.createElement(l,{searchString:i,setSearchString:o})):null}function d({headers:t,ordering:r,setOrdering:a}){let n=0;return e.createElement("thead",null,e.createElement("tr",null,t.map((t=>(n++,e.createElement("th",{key:t.key,className:"table-th table-th-"+n,onClick:()=>function(e,t,r){let a;a=t&&t.property===e&&"ascending"===t.order?{order:"descending",property:e}:{order:"ascending",property:e};r(a)}(t.key,r,a)},e.createElement("div",{className:"table-th-content"},t.name,e.createElement("span",{className:"table-th-sortIcons"},e.createElement("button",{className:r&&r.property===t.key&&"ascending"===r.order?"sortIcon--active":null},"▲"),e.createElement("button",{className:r&&r.property===t.key&&"descending"===r.order?"sortIcon--active":null},"▼")))))))))}function p({slice:t}){let r=0,a=0;return e.createElement("tbody",{style:{minHeight:3*t.length+"rem"}},t.map((t=>(r++,a++,e.createElement("tr",{className:"table-tr table-tr-"+a,key:"TableRow"+r},Object.values(t).map((t=>e.createElement("td",{className:"table-td",key:"TableData"+r++},t))))))))}function u({headers:t,slice:r,ordering:a,setOrdering:n}){return e.createElement("div",{className:"table"},e.createElement("table",{"aria-label":"data table"},e.createElement(d,{headers:t,ordering:a,setOrdering:n}),e.createElement(p,{slice:r})))}function g({currentPage:t,pageSize:r,filteredData:a,slice:n}){return e.createElement("span",{className:"entriesDisplayer"},"Showing ",1===t?t:(t-1)*r+1,"-",r*t>a.length?t*r-(r-n.length):t*r," "," of ",a.length," ","entries")}function m({range:t,currentPage:r,setCurrentPage:a}){return e.createElement("div",{className:"pagination"},e.createElement("button",{disabled:1===r,onClick:()=>a(r-1)},"Previous"),t.map(((t,n)=>e.createElement("button",{key:n,className:r===t?"currentPage":null,onClick:()=>a(t)},t))),e.createElement("button",{disabled:r===t.length,onClick:()=>a(r+1)},"Next"))}function b({range:t,setCurrentPage:a,currentPage:n,slice:i,filteredData:o,pageSize:s,displayEntries:l}){return r((()=>{0===i.length&&1!==n&&a(1)}),[i,n,a]),e.createElement("div",{className:"tableFooter"},l&&e.createElement(g,{currentPage:n,slice:i,filteredData:o,pageSize:s}),t.length>1&&e.createElement(m,{range:t,currentPage:n,setCurrentPage:a}))}n.propTypes={data:a.arrayOf(a.object).isRequired,searchString:a.string.isRequired},i.propTypes={data:a.arrayOf(a.object).isRequired,currentPage:a.number.isRequired,pageSize:a.number.isRequired,ordering:a.object.isRequired},o.propTypes={data:a.arrayOf(a.object).isRequired,ordering:a.object},s.propTypes={pageSize:a.number,setPageSize:a.func,pageSizeOptions:a.array},l.propTypes={searchString:a.string,setSearchString:a.func},c.propTypes={selectPageSize:a.bool,pageSize:a.number,setPageSize:a.func,pageSizeOptions:a.array,searchString:a.string,setSearchString:a.func,allowSearch:a.bool},d.propTypes={headers:a.array,ordering:a.object,setOrdering:a.func},p.propTypes={slice:a.arrayOf(a.object).isRequired},u.propTypes={headers:a.arrayOf(a.object).isRequired,slice:a.arrayOf(a.object).isRequired,ordering:a.object,setOrdering:a.func,description:a.string},g.propTypes={currentPage:a.number.isRequired,pageSize:a.number.isRequired,filteredData:a.arrayOf(a.object).isRequired,slice:a.arrayOf(a.object).isRequired},m.propTypes={range:a.arrayOf(a.number).isRequired,currentPage:a.number.isRequired,setCurrentPage:a.func.isRequired},b.propTypes={range:a.arrayOf(a.number).isRequired,setCurrentPage:a.func.isRequired,currentPage:a.number.isRequired,slice:a.arrayOf(a.object).isRequired,filteredData:a.arrayOf(a.object).isRequired,pageSize:a.number.isRequired,displayEntries:a.bool},b.defaultProps={displayEntries:!0};function f({data:r,headers:a,pageSizeOptions:s,defaultSorting:l,displayEntries:d,allowSearch:p,selectPageSize:g}){const[m,f]=t(l),[h,y]=t(""),[S,E]=t(s[0]),[z,P]=t(1),w=n(r,h),x=o(w,m),{slice:O,range:v}=i(x,z,S,m);return e.createElement("div",{className:"mainContainer"},e.createElement(c,{selectPageSize:g,pageSize:S,setPageSize:E,pageSizeOptions:s,searchString:h,setSearchString:y,allowSearch:p}),e.createElement(u,{headers:a,slice:O,ordering:m,setOrdering:f}),0===x.length?e.createElement("span",{className:"noDataMsg"},0===r.length?"No data":'No data found for "'+h+'"'):e.createElement(b,{range:v,slice:O,setCurrentPage:P,currentPage:z,filteredData:w,pageSize:S,displayEntries:d}))}!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".mainContainer{font-family:Arial,Helvetica,sans-serif;max-width:100%;width:100%}.tableHeader{color:#000;display:flex;flex-direction:column;gap:.5rem;justify-content:space-between;padding-bottom:.5rem}.search input,.selectPageSize select{background-color:transparent;border:1px solid;border-color:inherit;border-radius:.2rem;color:inherit;outline:none}.search input{padding:.2rem}@media (min-width:426px){.tableHeader{align-items:center;flex-direction:row;justify-content:space-between;padding-bottom:1rem}}.table{color:#000;overflow-x:auto}.table table{border-collapse:collapse;width:100%}.table-th{background-color:#000;border:2px solid #000;color:#fff;cursor:pointer;padding:.5rem;text-align:left}.table-th-content{align-items:center;display:flex;justify-content:space-between;user-select:none}.table-td{border:2px solid #ddd;padding:.5rem}.table-tr:nth-child(2n),.table-tr:nth-child(odd){background-color:#f2f2f2}.table-tr:hover{background-color:#fff}.table-th-sortIcons{align-items:center;display:flex;flex-direction:column;width:fit-content}.table-th-sortIcons button{background-color:transparent;border:none;color:hsla(0,0%,100%,.5);display:inline-block;font-size:.5rem;height:fit-content;padding:0;width:fit-content}.table-th-sortIcons button:first-child{position:relative;top:1px}.table-th-sortIcons button.sortIcon--active{color:#fff;font-size:.6rem}.tableFooter{align-items:center;color:#000;display:flex;flex-direction:column;flex-wrap:wrap;gap:1rem;max-width:100%;padding:1rem}@media (min-width:426px){.tableFooter{align-items:center;flex-direction:row;justify-content:space-between}}.pagination{display:flex;flex-wrap:wrap;gap:.5rem;min-width:100%}.pagination button{border:2px solid transparent;border-radius:.6rem;color:inherit;cursor:pointer;height:2.5rem;width:2.5rem}.pagination button:first-of-type,.pagination button:last-of-type{width:5.5rem}.pagination .currentPage{background:#000;border:2px solid #000;color:#fff}.pagination button[disabled]{cursor:auto}.pagination button[disabled]:hover{border:2px solid transparent}.pagination button:hover{border:2px solid #000}.noDataMsg{background-color:#f2f2f2;border-bottom-left-radius:1rem;border-bottom-right-radius:1rem;box-sizing:border-box;display:inline-block;padding:2rem;text-align:center;width:100%}"),f.propTypes={data:a.arrayOf(a.object).isRequired,headers:a.arrayOf(a.object).isRequired,pageSizeOptions:a.arrayOf(a.number),defaultSorting:a.object,displayEntries:a.bool,allowSearch:a.bool,selectPageSize:a.bool},f.defaultProps={pageSizeOptions:[10,25,50,100],defaultSorting:void 0,displayEntries:!0,allowSearch:!0,selectPageSize:!0};export{f as default};
